#include <AFMotor.h>  //including AFMotor files into Library
#include <Servo.h>    //including Servo files into Library


AF_DCMotor RightWheel(1);  //Declaring M1 to RightWheel
AF_DCMotor LeftWheel(2);   //Declaring M2 to LeftWheel

Servo ClawServo;  //Declaring Servo2(9) as ClawServo
Servo ArmServo;   //Declaring Servo1(10) as ArmServo

void setup() {

  RightWheel.setSpeed(200);  //Set init1al Speed of RightWheel
  RightWheel.run(RELEASE);   //Set initial stop for RightWheel
  LeftWheel.setSpeed(200);   //Set init1al Speed of LeftWheel
  LeftWheel.run(RELEASE);    //Set initial stop for LeftWheel

  ClawServo.attach(9);  //Attaching ClawServo to Pin9 (Servo2)
  ArmServo.attach(10);  //Attaching ArmServo to Pin10 (Servo1)

  pinMode(6, INPUT);  //Declare Pin 6 for IR Sensor Left
  pinMode(7, INPUT);  //Declare Pin 7 for IR Sensor Right
  pinMode(8, INPUT);  //Declare Pin 8 for ProxiSensor
}

void loop() {

  int IRSLeft = digitalRead(6);
  int IRSRight = digitalRead(7);
  int ProxiSensor = digitalRead(8);

  RightWheel.run(FORWARD);  //RightWheel starts going forward
  LeftWheel.run(FORWARD);   //LefttWheel starts going forward

  if (ProxiSensor == 0) {  //When the ball is detected in reaching distance
    RightWheel.run(RELEASE);  //RightWheel stops
    LeftWheel.run(RELEASE);   //LefttWheel stops

    delay(500);

    ArmServo.write(30); //Arm increases 30deg
    delay(500);

    ClawServo.write(60); //Claw will close on 60deg
    delay(500);

    ArmServo.write(60); //Arm increases a further 30deg
  }

  RightWheel.run(BACKWARD);  //RightWheel starts reversing
  LeftWheel.run(BACKWARD);   //LefttWheel starts reversing

  if (IRSLeft == 0) {  //To turn on the spot

    RightWheel.run(BACKWARD);  //RightWheel starts reversing
    LeftWheel.run(RELEASE);    //LefttWheel stops
  }

  RightWheel.run(FORWARD);  //RightWheel starts moving forward
  LeftWheel.run(FORWARD);   //LefttWheel starts moving forward

  if (ProxiSensor == 0) {
    RightWheel.run(RELEASE);  //RightWheel stops
    LeftWheel.run(RELEASE);   //LefttWheel stops

    delay(500);

    ArmServo.write(-30); //Arm decreses 30deg
    delay(500);

    ClawServo.write(-60); //Arm will open to release tennis ball
  }
}
